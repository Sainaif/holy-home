<mxfile host="app.diagrams.net">
  <diagram name="Architektura Holy Home" id="arch">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Tytuł -->
        <mxCell id="title" value="Architektura systemu Holy Home (3-tier)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="390" y="40" width="390" height="30" as="geometry" />
        </mxCell>

        <!-- User/Browser -->
        <mxCell id="user" value="" style="shape=actor;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="100" y="150" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="userLabel" value="Użytkownik&lt;br&gt;(Przeglądarka)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="80" y="240" width="100" height="30" as="geometry" />
        </mxCell>

        <!-- Frontend Layer -->
        <mxCell id="frontendBox" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="270" y="120" width="260" height="250" as="geometry" />
        </mxCell>
        <mxCell id="frontendTitle" value="WARSTWA PREZENTACJI" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="310" y="130" width="180" height="30" as="geometry" />
        </mxCell>

        <mxCell id="vue" value="Vue 3 + Vite" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="290" y="170" width="220" height="30" as="geometry" />
        </mxCell>

        <mxCell id="vuerouter" value="Vue Router" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="290" y="210" width="100" height="30" as="geometry" />
        </mxCell>

        <mxCell id="pinia" value="Pinia" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="410" y="210" width="100" height="30" as="geometry" />
        </mxCell>

        <mxCell id="axios" value="Axios" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="290" y="250" width="100" height="30" as="geometry" />
        </mxCell>

        <mxCell id="tailwind" value="Tailwind CSS" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="410" y="250" width="100" height="30" as="geometry" />
        </mxCell>

        <mxCell id="pwa" value="PWA (Service Worker)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="290" y="290" width="220" height="30" as="geometry" />
        </mxCell>

        <mxCell id="nginx" value="Nginx (Reverse Proxy)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="290" y="330" width="220" height="30" as="geometry" />
        </mxCell>

        <!-- Backend Layer -->
        <mxCell id="backendBox" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="610" y="120" width="260" height="250" as="geometry" />
        </mxCell>
        <mxCell id="backendTitle" value="WARSTWA LOGIKI" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="650" y="130" width="180" height="30" as="geometry" />
        </mxCell>

        <mxCell id="go" value="Go 1.23" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="630" y="170" width="220" height="30" as="geometry" />
        </mxCell>

        <mxCell id="fiber" value="Fiber Framework" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="630" y="210" width="220" height="30" as="geometry" />
        </mxCell>

        <mxCell id="handlers" value="Handlers (HTTP)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="630" y="250" width="100" height="30" as="geometry" />
        </mxCell>

        <mxCell id="services" value="Services" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="750" y="250" width="100" height="30" as="geometry" />
        </mxCell>

        <mxCell id="middleware" value="Middleware&lt;br&gt;(Auth, Rate Limit)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="630" y="290" width="220" height="40" as="geometry" />
        </mxCell>

        <mxCell id="jwt" value="JWT + Argon2id + WebAuthn" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="630" y="340" width="220" height="30" as="geometry" />
        </mxCell>

        <!-- Database Layer -->
        <mxCell id="dbBox" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="950" y="120" width="180" height="250" as="geometry" />
        </mxCell>
        <mxCell id="dbTitle" value="WARSTWA DANYCH" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="960" y="130" width="160" height="30" as="geometry" />
        </mxCell>

        <mxCell id="mongo" value="MongoDB 8.0" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="970" y="170" width="140" height="30" as="geometry" />
        </mxCell>

        <mxCell id="collections" value="19 kolekcji:" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="970" y="210" width="140" height="20" as="geometry" />
        </mxCell>

        <mxCell id="coll1" value="- users, groups" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="970" y="230" width="140" height="15" as="geometry" />
        </mxCell>

        <mxCell id="coll2" value="- bills, consumptions" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="970" y="245" width="140" height="15" as="geometry" />
        </mxCell>

        <mxCell id="coll3" value="- loans, payments" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="970" y="260" width="140" height="15" as="geometry" />
        </mxCell>

        <mxCell id="coll4" value="- chores, supplies" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="970" y="275" width="140" height="15" as="geometry" />
        </mxCell>

        <mxCell id="coll5" value="- roles, permissions" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="970" y="290" width="140" height="15" as="geometry" />
        </mxCell>

        <mxCell id="coll6" value="- sessions, audit_logs" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="970" y="305" width="140" height="15" as="geometry" />
        </mxCell>

        <mxCell id="coll7" value="- approvals, templates" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="970" y="320" width="140" height="15" as="geometry" />
        </mxCell>

        <mxCell id="backup" value="Backup/Restore" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="970" y="340" width="140" height="30" as="geometry" />
        </mxCell>

        <!-- Connections -->
        <mxCell id="conn1" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="user" target="frontendBox">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="390" y="450" as="sourcePoint" />
            <mxPoint x="440" y="400" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="conn1Label" value="HTTPS" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="conn1">
          <mxGeometry x="-0.2" y="1" relative="1" as="geometry">
            <mxPoint x="5" y="-9" as="offset" />
          </mxGeometry>
        </mxCell>

        <mxCell id="conn2" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="frontendBox" target="backendBox">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="530" y="450" as="sourcePoint" />
            <mxPoint x="580" y="400" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="conn2Label" value="REST API&lt;br&gt;/api/*&lt;br&gt;SSE /events/*" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="conn2">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint x="5" y="-1" as="offset" />
          </mxGeometry>
        </mxCell>

        <mxCell id="conn3" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="backendBox" target="dbBox">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="870" y="450" as="sourcePoint" />
            <mxPoint x="920" y="400" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="conn3Label" value="MongoDB&lt;br&gt;Driver" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="conn3">
          <mxGeometry x="-0.2" y="2" relative="1" as="geometry">
            <mxPoint x="8" y="-8" as="offset" />
          </mxGeometry>
        </mxCell>

        <!-- Docker info -->
        <mxCell id="dockerBox" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;verticalAlign=top;dashed=1;dashPattern=5 5;" vertex="1" parent="1">
          <mxGeometry x="270" y="420" width="860" height="120" as="geometry" />
        </mxCell>
        <mxCell id="dockerTitle" value="DEPLOYMENT - DOCKER COMPOSE" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="555" y="430" width="290" height="30" as="geometry" />
        </mxCell>

        <mxCell id="cont1" value="Container: frontend&lt;br&gt;Nginx + Vue build&lt;br&gt;Port: 16161" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;align=center;" vertex="1" parent="1">
          <mxGeometry x="290" y="470" width="220" height="60" as="geometry" />
        </mxCell>

        <mxCell id="cont2" value="Container: api&lt;br&gt;Go binary&lt;br&gt;Port: 16162" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;align=center;" vertex="1" parent="1">
          <mxGeometry x="630" y="470" width="220" height="60" as="geometry" />
        </mxCell>

        <mxCell id="cont3" value="Container: mongo&lt;br&gt;MongoDB 8.0&lt;br&gt;Volume: mongo_data" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=center;" vertex="1" parent="1">
          <mxGeometry x="950" y="470" width="180" height="60" as="geometry" />
        </mxCell>

        <!-- Build info -->
        <mxCell id="buildInfo" value="Build: WSL (Windows Subsystem for Linux)&lt;br&gt;Registry: GitHub Container Registry (GHCR)" style="text;html=1;strokeColor=#666666;fillColor=#f5f5f5;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="270" y="570" width="860" height="40" as="geometry" />
        </mxCell>

        <!-- Porty info -->
        <mxCell id="portsBox" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="100" y="420" width="120" height="120" as="geometry" />
        </mxCell>
        <mxCell id="portsTitle" value="PORTY" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="120" y="430" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="port1" value="16161&lt;br&gt;Frontend" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="110" y="460" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="port2" value="16162&lt;br&gt;Backend API" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="110" y="490" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="port3" value="27017&lt;br&gt;MongoDB&lt;br&gt;(internal)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="110" y="520" width="100" height="30" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
